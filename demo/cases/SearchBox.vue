<template>
    <article class="veui-search-box-demo">
        <h1><code>&lt;veui-search-box&gt;</code></h1>
        <veui-form>
            <section class="has-margin-right">
                <h2>È£éÊ†º</h2>
                <div class="options-desc">
                    ÂèØÈÄâÁöÑÈ£éÊ†º <span class="bg-gray-show">ui</span>
                    Â±ûÊÄßÂÄºÔºö <span class="bg-gray-show">normal / strong / inline</span>
                </div>
                <section>
                    <veui-field
                        label="normal"
                    >
                        <veui-search-box
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            clearable
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                    </veui-field>
                    <veui-field
                        label="strong"
                    >
                        <veui-search-box
                            ui="strong"
                            clearable
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                    </veui-field>
                    <veui-field
                        label="inline"
                    >
                        <veui-search-box
                            clearable
                            ui="inline"
                            :placeholder="placeholder"
                            :suggest-trigger="[]"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                    </veui-field>
                </section>
                <h2>Â∞∫ÂØ∏</h2>
                <div class="options-desc">
                    ÂèØÈÄâÁöÑÂ∞∫ÂØ∏ <span class="bg-gray-show">ui</span> 
                    Â±ûÊÄßÂÄºÔºö <span class="bg-gray-show">xs / s / m / l</span>
                </div>
                <section>
                    <veui-field
                        label="Ë∂ÖÂ∞èÂè∑ÔºàxsÔºâ"
                    >
                        <veui-search-box
                            ui="xs"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                        <veui-search-box
                            ui="xs strong"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                        <veui-search-box
                            ui="xs inline"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                    </veui-field>
                    <veui-field
                        label="Â∞èÂè∑ÔºàsÔºâ"
                    >
                        <veui-search-box
                            ui="s"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                        <veui-search-box
                            ui="s strong"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                        <veui-search-box
                            ui="s inline"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                    </veui-field>
                    <veui-field
                        label="‰∏≠Âè∑ÔºàmÔºâ"
                    >
                        <veui-search-box
                            ui="m"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                        <veui-search-box
                            ui="m strong"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                        <veui-search-box
                            ui="m inline"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                    </veui-field>
                    <veui-field
                        label="Â§ßÂè∑ÔºàlÔºâ"
                    >
                        <veui-search-box
                            ui="l"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                        <veui-search-box
                            ui="l strong"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                        <veui-search-box
                            ui="l inline"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                    </veui-field>
                    <veui-field
                        label="Ë∂ÖÂ§ßÂè∑ÔºàxlÔºâ"
                    >
                        <veui-search-box
                            ui="xl"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                        <veui-search-box
                            ui="xl strong"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                        <br/>
                        <veui-search-box
                            ui="xl inline"
                            placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                            :suggestions="suggestions4"
                            @input="handleSuggest('4', $event)"
                            @search="log($event)"
                            @select="log('select', $event)"
                        />
                    </veui-field>
                </section>
            </section>
            <section class="has-margin-right">
                <h2>disabled</h2>
                <section>
                    <veui-search-box
                        :value="value"
                        clearable
                        placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                        disabled
                        @search="log($event)"
                    />
                    <veui-search-box
                        ui="strong"
                        disabled
                        placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                        :suggestions="suggestions5"
                        @input="handleSuggest('5', $event)"
                        @search="log($event)"
                    />
                </section>
            </section>
            <section class="has-margin-right">
                <h2>readonly</h2>
                <section>
                    <veui-search-box
                        :value="value"
                        clearable
                        placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                        readonly
                        @search="log($event)"
                    />
                    <veui-search-box
                        :value="value"
                        clearable
                        ui="strong"
                        placeholder="ÊêúÁ¥¢ÊèêÁ§∫ÊñáÊ°à"
                        readonly
                        @search="log($event)"
                    />
                </section>
            </section>
            <section class="has-margin-right">
                <h2>suggestions</h2>
                <section>
                    <veui-search-box
                        v-model="value2"
                        clearable
                        :placeholder="placeholder"
                        :suggestions="suggestions1"
                        suggest-trigger="focus"
                        @suggest="asyncHandleSuggest('1', $event)"
                        @search="log($event)"
                        @select="value2 = $event.label"
                    />
                    <veui-search-box
                        :placeholder="placeholder"
                        :suggestions="suggestions8"
                        suggest-trigger="focus"
                        @search="log($event)"
                        @suggest="suggestHandler"
                    >
                        <template
                            slot="suggestion"
                            slot-scope="suggestion"
                        >
                            <span>{{ suggestion.value }}</span>
                            <veui-icon name="eye"/>
                        </template>
                    </veui-search-box>
                    <veui-search-box
                        :placeholder="placeholder"
                        :suggestions="suggestions9"
                        replace-on-select
                        @input="handleSuggest('7', $event)"
                        @search="log($event)"
                    >
                        <template slot="suggestions-before">
                            <h3>header</h3>
                        </template>
                        <template
                            slot="group-label"
                            slot-scope="{ label }"
                        >
                            1üëâ {{ label }}
                        </template>
                        <template
                            slot="option-label"
                            slot-scope="{ label }"
                        >
                            2üëâ {{ label }}
                        </template>
                        <template slot="suggestions-after">
                            <h3>ender</h3>
                        </template>
                    </veui-search-box>
                </section>
            </section>
            <section>
                <h2>maxlength</h2>
                <div>
                    <veui-search-box clearable maxlength="10" placeholder="maxlength"/>
                    <veui-search-box
                        ui="strong"
                        clearable
                        maxlength="10"
                        strict
                        placeholder="maxlength &amp; strict"
                    />
                </div>
            </section>
        </veui-form>
    </article>
</template>

<script>
import bus from '../bus';
import {includes} from 'lodash';
import {SearchBox, Icon, Form, Field} from 'veui';
import 'vue-awesome/icons/flag';

export default {
    name: 'demo-search-box',
    components: {
        'veui-search-box': SearchBox,
        'veui-icon': Icon,
        'veui-field': Field,
        'veui-form': Form
    },
    data() {
        return {
            name: 'name',
            value: '',
            value2: null,
            value3: 'ÊµãËØïÂÄº',
            value4: 'ÊµãËØïÂÄº',
            valueis: 'ÊµãËØïÂÄº',
            placeholder: 'ÁôæÂ∫¶(placeholder)',
            suggestions1: [],
            suggestions2: [],
            suggestions3: [],
            suggestions4: [],
            suggestions5: [],
            suggestions8: [
                {
                    value: 'ÁôæÂ∫¶',
                    label: 'ÁôæÂ∫¶'
                },
                {
                    value: 'ÁôæÂ∫¶Ë¥¥Âêß',
                    label: 'ÁôæÂ∫¶Ë¥¥Âêß'
                },
                {
                    value: 'ÁôæÂ∫¶MVP',
                    label: 'ÁôæÂ∫¶MVP'
                }
            ],
            suggestions9: [
                {
                    label: 'Ê±ΩËΩ¶',
                    options: [
                        {label: 'camry', value: 'camry'},
                        {label: 'carola', value: 'carola'}
                    ]
                }
            ],
        };
    },
    methods: {
        handleSuggest(num, value) {
            if (value && num) {
                this[`suggestions${num}`] = [
                    {
                        value,
                        label: value
                    },
                    {
                        value: 'ÁôæÂ∫¶',
                        label: 'ÁôæÂ∫¶'
                    },
                    {
                        value: 'ÁôæÂ∫¶Ë¥¥Âêß',
                        label: 'ÁôæÂ∫¶Ë¥¥Âêß'
                    },
                    {
                        value: 'ÁôæÂ∫¶MVP',
                        label: 'ÁôæÂ∫¶MVP'
                    }
                ];
            } else {
                this[`suggestions${num}`] = [
                    '',
                    'ÁôæÂ∫¶',
                    'ÁôæÂ∫¶Ë¥¥Âêß',
                    'ÁôæÂ∫¶MVP',
                    'ÁôæÂ∫¶ÊåáÊï∞'
                ];
            }
        },
        asyncHandleSuggest(num, value) {
            setTimeout(() => {
                if (value && num < 3) {
                    this[`suggestions${num}`] = [
                        {
                            value,
                            label: value
                        },
                        {
                            value: 'ÁôæÂ∫¶',
                            label: 'ÁôæÂ∫¶'
                        },
                        {
                            value: 'ÁôæÂ∫¶Ë¥¥Âêß',
                            label: 'ÁôæÂ∫¶Ë¥¥Âêß'
                        },
                        {
                            value: 'ÁôæÂ∫¶MVP',
                            label: 'ÁôæÂ∫¶MVP'
                        }
                    ];
                } else {
                    this[`suggestions${num}`] = [
                        '',
                        'ÁôæÂ∫¶',
                        'ÁôæÂ∫¶Ë¥¥Âêß',
                        'ÁôæÂ∫¶MVP',
                        'ÁôæÂ∫¶ÊåáÊï∞'
                    ];
                }
            }, 1000);
        },
        log(item) {
            bus.$emit('log', item);
        },
        suggestHandler(value) {
            this.suggestions8 = this.suggestions8.map(item => {
                item.hidden = !(
                    includes(item.label, value) || includes(item.value, value)
                );
                return item;
            });
        }
    }
};
</script>
<style lang="less">
.veui-search-box-demo {
    padding-bottom: 20px;

    .has-margin-right {
        .veui-search-box {
            margin-right: 90px;
        }
    }
    .veui-field {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }

}

section {
  & & {
    margin-bottom: 20px;
  }
}
</style>
