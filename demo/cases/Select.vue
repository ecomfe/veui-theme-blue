
<template>
    <article>
        <h1>
            <code>&lt;veui-select&gt;</code>
        </h1>
        <h2>Â∞∫ÂØ∏</h2>
        <div class="options-desc">ÂèØÈÄâÁöÑÂ∞∫ÂØ∏
            <span class="bg-gray-show">ui</span>
            Â±ûÊÄßÂÄºÔºö
            <span class="bg-gray-show">xs / sÔºàÈªòËÆ§ÔºåÂèØ‰∏ç‰º†Ôºâ / m / l</span>
        </div>
        <section>
            <div class="title-desc">ÈªòËÆ§Ê†∑Âºè</div>
            <veui-form>
                <veui-field
                    v-for="(ui, index) in sizes"
                    :key="index"
                    :label="ui.label"
                >
                    <veui-select
                        v-model="defaultValue1"
                        :ui="ui.value"
                        v-bind="attrs"
                        placeholder="ÂÖ®ÈÉ®"
                        clearable
                        :filter="filter"
                        :readonly="ui.label === 'Âè™ËØª'"
                        :disabled="ui.label === 'Á¶ÅÁî®'"
                    />
                </veui-field>
                <veui-field
                    label="Âè™ËØª"
                >
                    <veui-select
                        v-model="defaultValue1"
                        ui="s"
                        v-bind="attrs"
                        placeholder="ÂÖ®ÈÉ®"
                        clearable
                        :filter="filter"
                        readonly
                    />
                </veui-field>
                <veui-field
                    label="Á¶ÅÁî®"
                >
                    <veui-select
                        v-model="defaultValue1"
                        ui="s"
                        v-bind="attrs"
                        placeholder="ÂÖ®ÈÉ®"
                        clearable
                        :filter="filter"
                        disabled
                    />
                </veui-field>
            </veui-form>
        </section>
        <section>
            <div class="title-desc">Â§öÈÄâÊ†∑Âºè</div>
            <veui-form>
                <veui-field
                    v-for="(ui, index) in sizes"
                    :key="index"
                    :label="ui.label"
                >
                    <veui-select
                        v-model="defaultMultiValue"
                        :ui="ui.value"
                        v-bind="attrs"
                        placeholder="ÂÖ®ÈÉ®"
                        clearable
                        multiple
                    >
                    </veui-select>
                </veui-field>
            </veui-form>
        </section>
        <section>
            <div class="title-desc">ÂçïÈÄâ‰∏îÊêúÁ¥¢Ê†∑ÂºèÔºö</div>
            <veui-form>
                <veui-field
                    v-for="(ui, index) in sizes"
                    :key="index"
                    :label="ui.label"
                >
                    <veui-select
                        v-model="defaultValue2"
                        :ui="ui.value"
                        v-bind="attrs"
                        searchable
                    />
                </veui-field>
            </veui-form>
        </section>
        <section>
            <div class="title-desc">Â§öÈÄâ‰∏îÊêúÁ¥¢Ê†∑ÂºèÔºö</div>
            <veui-form>
                <veui-field
                    v-for="(ui, index) in sizes"
                    :key="index"
                    :label="ui.label"
                >
                    <veui-select
                        v-model="defaultSearchMultiValue"
                        v-bind="attrs"
                        :ui="ui.value"
                        searchable
                        multiple
                    />
                </veui-field>
            </veui-form>
        </section>
        <section>
            <div class="title-desc">ÂàÜÈöîÁ∫øÊ†∑ÂºèÔºö</div>
            <veui-form>
                <veui-field
                    label="ÂàÜÈöîÁ∫øÊ†∑ÂºèÔºö">
                    <veui-select
                        v-model="defaultValue9"
                        v-bind="optGroupAttrs"
                        :options="groupedOpts"
                    />
                </veui-field>
            </veui-form>
        </section>
        <h2 style="margin-top: 50px;">‰ª•‰∏ã‰∏∫Êõ¥Â§öÁªÑ‰ª∂ÂäüËÉΩdemoÁ§∫‰æã</h2>
        <section>
            <div class="title-desc">SlotÊ†∑ÂºèÔºö</div>
            <veui-form>
                <veui-field label="name=option-labelÔºö">
                    <veui-select
                        v-model="defaultValue3"
                        v-bind="attrs"
                    >
                        <template
                            slot="option-label"
                            slot-scope="props"
                        >
                            <span class="veui-option-custom-label">{{ props.label }}</span>
                        </template>
                    </veui-select>
                </veui-field>
                <veui-field label="name=optionÔºö">
                    <veui-select
                        v-model="defaultValue1"
                        v-bind="attrs"
                    >
                        <template
                            slot="option"
                            slot-scope="props"
                        >
                            <veui-radio :checked="props.selected">{{ props.label }}</veui-radio>
                        </template>
                    </veui-select>
                </veui-field>
            </veui-form>
        </section>
        <section>
            <div class="title-desc">ÂÜÖËÅîÊ†∑ÂºèÔºö</div>
            <veui-form>
                <veui-field label="ÂÜÖËÅîÊ†∑Âºè1Ôºö">
                    <veui-select
                        v-model="hero"
                        multiple
                    >
                        <veui-option-group
                            position="popup"
                            trigger="hover"
                        >
                            <template slot="label">‰∏≠ÂõΩ üá®üá≥</template>
                            <veui-option-group
                                label="‰∫íËÅîÁΩë"
                                position="popup"
                            >
                                <veui-option
                                    value="baidu"
                                    label="ÁôæÂ∫¶"
                                />
                                <veui-option
                                    value="alibaba"
                                    label="ÈòøÈáåÂ∑¥Â∑¥"
                                />
                                <veui-option
                                    value="tencent"
                                    label="ËÖæËÆØ"
                                />
                            </veui-option-group>
                            <veui-option-group
                                label="ÈÄö‰ø°"
                                position="popup"
                            >
                                <veui-option
                                    value="telecom"
                                    label="‰∏≠ÂõΩÁîµ‰ø°"
                                />
                                <veui-option
                                    value="mobile"
                                    label="‰∏≠ÂõΩÁßªÂä®"
                                />
                            </veui-option-group>
                        </veui-option-group>
                        <veui-option-group
                            label="ÁæéÂõΩ"
                            position="popup"
                        >
                            <veui-option-group
                                label="‰∫íËÅîÁΩë"
                                position="popup"
                            >
                                <veui-option
                                    value="google"
                                    label="Google"
                                />
                                <veui-option
                                    value="facebook"
                                    label="Facebook"
                                />
                                <veui-option
                                    value="twitter"
                                    label="Twitter"
                                />
                            </veui-option-group>
                            <veui-option-group
                                label="ÈÄö‰ø°"
                                position="popup"
                            >
                                <veui-option
                                    value="atnt"
                                    label="AT&T"
                                />
                                <veui-option
                                    value="verizon"
                                    label="Verizon"
                                />
                            </veui-option-group>
                        </veui-option-group>
                    </veui-select>
                </veui-field>
                <veui-field
                    label="ÂÜÖËÅîÊ†∑Âºè2Ôºö">
                    <veui-select v-model="phone">
                        <veui-option-group label="ÂõΩ‰∫ß">
                            <veui-option
                                value="xiaomi"
                                label="Â∞èÁ±≥"
                            />
                            <veui-option
                                value="oppo"
                                label="OPPO"
                            />
                            <veui-option
                                value="vivo"
                                label="vivo"
                            />
                            <veui-option
                                value="smartisan"
                                label="ÂùöÊûú"
                            />
                        </veui-option-group>
                        <veui-option-group
                            label="ÈùûÂõΩ‰∫ß"
                            position="popup"
                        >
                            <veui-option-group
                                label="ÁæéÂõΩ"
                                position="popup"
                            >
                                <veui-option
                                    value="apple"
                                    label="Apple"
                                />
                                <veui-option
                                    value="google"
                                    label="Google"
                                />
                            </veui-option-group>
                            <veui-option-group
                                label="Êó•Êú¨"
                                position="popup"
                            >
                                <veui-option
                                    value="sharp"
                                    label="Â§èÊôÆ"
                                />
                                <veui-option
                                    value="sony"
                                    label="Á¥¢Â∞º"
                                />
                            </veui-option-group>
                            <veui-option-group
                                label="Èü©ÂõΩ"
                                position="popup"
                            >
                                <veui-option
                                    value="samsung"
                                    label="‰∏âÊòü"
                                />
                                <veui-option
                                    value="lg"
                                    label="LG"
                                />
                            </veui-option-group>
                        </veui-option-group>
                    </veui-select>
                </veui-field>
                <veui-field
                    
                    label="Âä®ÊÄÅÂÜÖËÅîÊ†∑ÂºèÔºö">
                    <veui-select
                        searchable
                        @input="keyword = $event"
                    >
                        <template v-if="keyword">
                            <veui-option
                                v-for="option in result"
                                :key="option.value"
                                :value="option.value"
                                :label="option.label"
                            />
                        </template>
                    </veui-select>
                </veui-field>
            </veui-form>
        </section>
        <section>
            <div class="title-desc">Â§çÊùÇËá™ÂÆö‰πâÊ†∑ÂºèÔºö</div>
            <veui-form>
                <veui-field label="Ëá™ÂÆö‰πâ1Ôºö">
                    <veui-select
                        v-model="complex"
                        multiple
                        clearable
                        searchable
                        :options="complexResult"
                        @input="handleSearch"
                    >
                        <template v-if="complexResult">
                            <veui-option
                                v-for="o in complexResult"
                                :key="o.value"
                                :label="o.label"
                                :value="o.value"
                            />
                        </template>
                        <template v-else>
                            <veui-option-group
                                v-for="(group, i) in complexData"
                                :key="i"
                                :label="group.label"
                                position="popup"
                            >
                                <template v-for="(g, j) in group.options">
                                    <veui-option-group
                                        v-if="g.options"
                                        :key="j"
                                        position="popup"
                                        :label="g.label"
                                        :options="g.options"
                                    />
                                    <veui-option
                                        v-else
                                        :key="j"
                                        :label="g.label"
                                        :value="g.value"
                                    />
                                </template>
                                <template
                                    v-if="group.label === '‰∏öÂä°ÁÇπ'"
                                    #before
                                >
                                    <div class="note">
                                        <veui-icon name="info-circle"/>
                                        <div class="text">
                                            Ê≠§Â§Ñ‰ªÖÊòæÁ§∫‰∏öÂä°ÁÇπ Top nÔºåÊÇ®ÂèØÈÄöËøáÊêúÁ¥¢Ê∑ªÂä†ÂÖ∂ÂÆÉ‰∏öÂä°ÁÇπÊ†áÁ≠æ„ÄÇ
                                        </div>
                                    </div>
                                </template>
                            </veui-option-group>
                        </template>
                    </veui-select>
                </veui-field>
                <veui-field
                    
                    label="Ëá™ÂÆö‰πâ2Ôºö">
                    <veui-select
                        v-model="complex"
                        multiple
                    >
                        <template v-if="loaded">
                            <veui-option-group
                                label="Foo"
                                position="popup"
                            >
                                <template #before>NOTE Foo</template>
                                <veui-option
                                    label="Foo1"
                                    value="foo1"
                                />
                            </veui-option-group>
                        </template>
                    </veui-select>
                </veui-field>
            </veui-form>
        </section>
        <section>
            <div class="title-desc">ÂàÜÁªÑÊ†∑Âºè</div>
            <veui-form>
                <veui-field
                    
                    label="ÂèØÊêúÁ¥¢Ôºö">
                    <veui-select
                        v-model="defaultValue5"
                        v-bind="optGroupAttrs"
                        ui="s"
                        searchable
                    />
                </veui-field>
                <veui-field
                    
                    label="SlotÂàÜÁªÑÊ†∑Âºè1Ôºö">
                    <veui-select
                        v-model="defaultValue7"
                        v-bind="optGroupAttrs"
                    >
                        <template
                            slot="option"
                            slot-scope="props"
                        >
                            <div class="veui-option-custom">{{ props.label }}</div>
                        </template>
                    </veui-select>
                </veui-field>
                <veui-field
                    
                    label="SlotÂàÜÁªÑÊ†∑Âºè2Ôºö">
                    <veui-select
                        v-model="defaultValue8"
                        v-bind="optGroupAttrs"
                    >
                        <template
                            slot="option"
                            slot-scope="props"
                        >
                            <span class="veui-option-label-text veui-option-custom-label">
                                {{ props.label }}
                            </span>
                            <veui-icon name="gift"/>
                        </template>
                    </veui-select>
                </veui-field>
                <veui-field
                    label="ÂÜÖËÅîÊ†∑ÂºèÔºö">
                    <veui-select
                        v-model="defaultValue10"
                        clearable
                    >
                        <template
                            slot="group-label"
                            slot-scope="{ label }"
                        >
                            <b>{{ label }}</b>
                        </template>
                        <veui-option-group label="Â≠óÊØç">
                            <veui-option
                                value="A"
                                label="ÈÄâÈ°π A"
                            />
                            <veui-option
                                value="B"
                                label="ÈÄâÈ°π B"
                            />
                            <veui-option
                                value="C"
                                label="ÈÄâÈ°π C"
                            />
                        </veui-option-group>
                        <veui-option-group label="Êï∞Â≠ó">
                            <veui-option
                                value="1"
                                label="ÈÄâÈ°π 1"
                            />
                            <veui-option
                                value="2"
                                label="ÈÄâÈ°π 2"
                            />
                            <veui-option
                                value="3"
                                label="ÈÄâÈ°π 3"
                            />
                        </veui-option-group>
                    </veui-select>
                </veui-field>
            </veui-form>
        </section>
    </article>
</template>

<script>
import bus from '../bus';
import {Icon, Select, Option, OptionGroup, Radio, Field, Form} from 'veui';
import type from 'veui/managers/type';
import 'vue-awesome/icons/flag';
import 'vue-awesome/icons/gift';
import 'veui-theme-blue-icons/info-circle';
export default {
    name: 'select-demo',
    components: {
        'veui-select': Select,
        'veui-option': Option,
        'veui-option-group': OptionGroup,
        'veui-radio': Radio,
        'veui-icon': Icon,
        'veui-field': Field,
        'veui-form': Form
    },
    data() {
        return {
            filter: ({label}) => {
                return label.indexOf(this.keyword) !== -1;
            },
            keyword: '',
            phone: null,
            hero: ['baidu'],
            disabled: true,
            selected: true,
            complex: ['1', '2'],
            loaded: false,
            icon: true,
            defaultValue: null,
            defaultMultiValue: null,
            defaultSearchMultiValue: [1],
            defaultValue1: null,
            defaultValue2: 2,
            defaultValue3: null,
            defaultValue4: null,
            defaultValue5: null,
            defaultValue6: null,
            defaultValue7: null,
            defaultValue8: '1-1',
            defaultValue9: null,
            defaultValue10: null,
            sizes: [
                {
                    label: 'Ë∂ÖÂ∞èÂè∑[ui=xs]',
                    value: 'xs'
                },
                {
                    label: 'Â∞èÂè∑[ui=s]',
                    value: 's'
                },
                {
                    label: '‰∏≠Âè∑[ui=m]',
                    value: 'm'
                },
                {
                    label: 'Â§ßÂè∑[ui=l]',
                    value: 'l'
                }
            ],
            attrs: {
                name: 'age',
                readonly: false,
                disabled: false,
                clearable: true,
                options: [
                    {
                        label: '‰∏ãÊãâÈÄâÈ°π111',
                        value: 1
                    },
                    {
                        label: '‰∏ãÊãâÈÄâÈ°π‰∏ãÊãâÈÄâÈ°π‰∏ãÊãâÈÄâÈ°π112',
                        value: 2
                    },
                    {
                        label: '‰∏ãÊãâÈÄâÈ°π122',
                        value: 3
                    },
                    {
                        label: '‰∏ãÊãâÈÄâÈ°π222',
                        value: 4
                    }
                ]
            },
            optGroupAttrs: {
                name: 'name',
                readonly: false,
                disabled: false,
                clearable: true,
                options: [
                    {
                        label: '‰∏ãÊãâÈÄâÈ°π1',
                        position: 'popup',
                        options: [
                            {
                                label: 'Â≠êÈÄâÈ°π1',
                                value: '1-1'
                            },
                            {
                                label: 'Â≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°π2',
                                value: '1-2'
                            },
                            {
                                label: 'Â≠êÈÄâÈ°π3',
                                value: '1-3'
                            }
                        ]
                    },
                    {
                        label: '‰∏ãÊãâÈÄâÈ°π‰∏ãÊãâÈÄâÈ°π‰∏ãÊãâÈÄâÈ°π2',
                        options: [
                            {
                                label: 'Â≠êÈÄâÈ°π1',
                                value: '2-1'
                            },
                            {
                                label: 'Â≠êÈÄâÈ°π2',
                                value: '2-2'
                            },
                            {
                                label: 'Â≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°π3',
                                value: '2-3'
                            }
                        ]
                    },
                    {
                        label: '‰∏ãÊãâÈÄâÈ°π3',
                        options: [
                            {
                                label: 'Â≠êÈÄâÈ°π1',
                                value: '3-1'
                            },
                            {
                                label: 'Â≠êÈÄâÈ°π2',
                                value: '3-2'
                            },
                            {
                                label: 'Â≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°π3',
                                value: '3-3'
                            }
                        ]
                    },
                    {
                        label: '‰∏ãÊãâÈÄâÈ°π4',
                        options: [
                            {
                                label: 'Â≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°πÂ≠êÈÄâÈ°π1',
                                value: '4-1'
                            },
                            {
                                label: 'Â≠êÈÄâÈ°π2',
                                value: '4-2'
                            },
                            {
                                label: 'Â≠êÈÄâÈ°π3',
                                value: '4-3'
                            }
                        ]
                    }
                ]
            },
            searchResult: null,
            complexData: [
                {
                    label: 'ÂÜÖÂÆπÁ±ªÂûã',
                    options: [
                        {label: 'ÈÄöÁî®', value: '1'},
                        {label: 'ÈóÆÁ≠î', value: '2'},
                        {label: 'Â∏∏ËßÅÈóÆÈ¢ò', value: '3'}
                    ]
                },
                {
                    label: 'Ë°å‰∏ö',
                    options: [
                        {
                            label: 'ÂåªÁñóÊúçÂä°',
                            options: [{label: 'A', value: 'a'}]
                        },
                        {
                            label: 'Êï¥ÂΩ¢ÁæéÂÆπ',
                            options: [
                                {label: 'Êï¥ÂΩ¢ÁæéÂÆπÁªºÂêà', value: '4'},
                                {label: 'Êï¥ÂΩ¢‰øÆÂ§çÂ§ñÁßë', value: '5'},
                                {label: '‰∫îÂÆòÊï¥ÂΩ¢', value: '6'},
                                {label: 'ÂæÆÊï¥ÂΩ¢', value: '7'},
                                {label: 'ÂáèËÇ•Â°ëË∫´', value: '8'},
                                {label: 'Ê§çÂèë', value: '9'},
                                {label: 'Á∫πË∫´', value: '10'},
                                {label: 'Âè£ËÖîÁæéÂÆπ', value: '11'}
                            ]
                        },
                        {
                            label: 'ÂåªÁñóÂô®Ê¢∞',
                            options: [{label: 'B', value: 'b'}]
                        },
                        {
                            label: 'ÊïôËÇ≤ÂüπËÆ≠',
                            options: [{label: 'C', value: 'c'}]
                        },
                        {
                            label: 'ÊãõÂïÜÂä†Áõü',
                            options: [{label: 'D', value: 'd'}]
                        },
                        {
                            label: 'ÂïÜÂä°ÊúçÂä°',
                            options: [{label: 'E', value: 'e'}]
                        },
                        {
                            label: 'ÂäûÂÖ¨ÊñáÊïô',
                            options: [{label: 'F', value: 'f'}]
                        },
                        {
                            label: 'ÁΩëÁªúÊúçÂä°',
                            options: [{label: 'G', value: 'g'}]
                        }
                    ]
                },
                {
                    label: '‰∏öÂä°ÁÇπ',
                    options: [
                        {label: 'Â∑•Á®ãÂ∏àÂüπËÆ≠', value: '12'},
                        {label: 'Â§ßÊï∞ÊçÆÂüπËÆ≠Áè≠', value: '13'},
                        {label: 'ÂèåÁúºÁöÆ‰∫ßÂìÅÁ±ª', value: '14'},
                        {label: 'ÂàÜÊï£Êú∫', value: '15'},
                        {label: 'ÁºñÁ†ÅÂô®', value: '16'},
                        {label: 'Áõ∏‰∫≤‰∏≠‰ªã', value: '17'}
                    ]
                }
            ]
        };
    },
    computed: {
        result() {
            return [
                {label: 'Foo', value: 'foo'},
                {label: 'Bar', value: 'bar'},
                {label: this.keyword, value: this.keyword}
            ];
        },
        groupedOpts() {
            return type
                .clone(this.optGroupAttrs.options)
                .map(group => {
                    delete group.label;
                    delete group.position;
                    return group;
                })
                .reduce((acc, cur) => {
                    acc.push(cur);
                    return acc;
                }, []);
        },
        complexResult() {
            return this.searchResult
                ? (this.complex || [])
                    .map(v => ({
                        label: v + '**',
                        value: v
                    }))
                    .concat(this.searchResult || [])
                : null;
        }
    },
    mounted() {
        this.$children.forEach(child => {
            child.$on('click', () => {
                bus.$emit('log', child.$el.getAttribute('ui'));
            });
        });
        this.loaded = true;
    },
    methods: {
        change(value) {
            // alert('ÊÇ®ÈÄâ‰∏≠ÁöÑ‰∏ãÊãâÈÄâÈ°πÂÄºÊòØ' + value)
        },
        handleSearch(val) {
            if (val) {
                this.searchResult = Array.from({
                    length: 5
                }).map((_, i) => ({
                    label: `${val}#${i}`,
                    value: `${val}#${i}`
                }));
            } else {
                this.searchResult = null;
            }
        }
    }
};
</script>

<style lang="less" scoped>
section {
    margin-bottom: 20px;
}
.veui-option-label {
  &-text,
  .veui-icon {
    vertical-align: middle;
  }
  .veui-icon {
    margin-left: 5px;
  }
}
.veui-option-custom {
  position: relative;
  padding-left: 24px;
  &::after {
    content: '‚ù§Ô∏è';
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
  }
  &-label {
    color: rgb(80, 170, 39);
  }
}
.filter {
  width: calc(100% - 10px);
  margin: 5px;
}
.note {
  margin: 8px;
  font-size: 12px;
  width: 240px;
  .veui-icon {
    float: left;
    margin-top: 3px;
    margin-right: 8px;
    margin-left: 8px;
  }
  .text {
    overflow: hidden;
  }
}
</style>
